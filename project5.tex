\documentclass[11pt,letterpaper]{report}
\usepackage[margin=0.75in]{geometry}
\usepackage[latin1]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{color}
\usepackage[shortlabels]{enumerate}
\graphicspath{{./images/}{IR}}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\lhead{CS333}
\chead{Project 5 Report}
\rhead{%name}
\author{%name}
\title{Project Report\\Introduction to Operating Systems\\ Winter 2018}
\date{03/1/2018}
\begin{document}
% \maketitle

%Are you taking CS333 @ Portland State University? Do you hate how long it takes you to write a report? Here I have created templates for each Project Report based off the appropriate grading rubric. All you need to do is fill in your correct overview/description for each section to complete your report. If you liked these templates, please give my repo a golden star! 

%%%%%%%%%%%%%%DESCRIPTION%%%%%%%%%%%%%%%%%%%%%%%%%%



  \section*{Description}
    \begin{enumerate}
          \item New file permissions and modifications for exec
                
                      \item Updated {\tt ls} command to display the new file permissions
                            
                                  \item New commands and system calls to modify the permissions
                                        
                                          \end{enumerate}
                                            
                                            %%%%%%%%%%%%%%DELIVERABLES%%%%%%%%%%%%%%%%%%%%%%%%%%

                                              \section*{Deliverables}
                                                The following features were added to xv6:
                                                  
                                                    \begin{enumerate}
                                                          \item {\tt inode} / {\tt dinode} / {\tt stat}
                                                                      \begin{enumerate}
                                                                                      \item New file permissions based on user, group and other
                                                                                                      \item New {\tt mode\_t} and {\tt stat\_mode\_t} unions and what they are used for
                                                                                                                      \item Persistence of new file permissions between xv6 sessions
                                                                                                                                  \end{enumerate}
                                                                                                                                          
                                                                                                                                                \item New {\tt chmod} / {\tt chown} / {\tt chgrp}
                                                                                                                                                            \begin{enumerate}
                                                                                                                                                                            \item New system calls chmod, chown, chgrp
                                                                                                                                                                                            \item New commands chmod, chown, chgrp
                                                                                                                                                                                                            \item Valid integer ranges for each command
                                                                                                                                                                                                                        \end{enumerate}
                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                            \item {\tt ls} command          
                                                                                                                                                                                                                                                        \begin{enumerate}
                                                                                                                                                                                                                                                                        \item The new header and changes to the columns
                                                                                                                                                                                                                                                                                        \item What the values in the {\tt mode} column represent
                                                                                                                                                                                                                                                                                                    \end{enumerate}
                                                                                                                                                                                                                                                                                                            \item {\tt exec} system call          
                                                                                                                                                                                                                                                                                                                        \begin{enumerate}
                                                                                                                                                                                                                                                                                                                                        \item New exec permission check
                                                                                                                                                                                                                                                                                                                                                        \item {\tt setuid} functionality
                                                                                                                                                                                                                                                                                                                                                                    \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                      \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                        


                                                                                                                                                                                                                                                                                                                                                                        \newpage  
                                                                                                                                                                                                                                                                                                                                                                        %%%%%%%%%%%%%%IMPLEMENTATION%%%%%%%%%%%%%%%%%%%%%%%%%%

                                                                                                                                                                                                                                                                                                                                                                          \section*{Implementation}
                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                              \subsection*{{\tt inode} / {\tt dinode} / {\tt stat}}
                                                                                                                                                                                                                                                                                                                                                                                \begin{enumerate}[(a)]
                                                                                                                                                                                                                                                                                                                                                                                      \item New {\tt mode\_t} union in fs.h and addition of {\tt uid, gid and mode} fields to {\tt inode} and {\tt dinode}
                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                  \item New {\tt stat\_mode\_t} union in stat.h and addition of{\tt uid, gid and mode} fields to {\tt stat}
                                                                                                                                                                                                                                                                                                                                                                                                        \item  New default {\tt mode} define in param.h
                                                                                                                                                                                                                                                                                                                                                                                                              \item Updated functions in fs.c to initialize / copy new {\tt uid, gid and mode} fields
                                                                                                                                                                                                                                                                                                                                                                                                                    \item Updated function in mkfs.c to initialize {\tt uid, gid and mode} fields
                                                                                                                                                                                                                                                                                                                                                                                                                      \end{enumerate}

                                                                                                                                                                                                                                                                                                                                                                                                                        \subsection*{{\tt chmod} / {\tt chown} / {\tt chgrp} System Calls}
                                                                                                                                                                                                                                                                                                                                                                                                                          \begin{enumerate}[(a)]
                                                                                                                                                                                                                                                                                                                                                                                                                                \item System call handlers in sysfile.c ({\tt sys\_chmod} etc.)
                                                                                                                                                                                                                                                                                                                                                                                                                                      \item Implementation in fs.c, including locking and updating of inode
                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Bounds checking for mode in sys chmod
                                                                                                                                                                                                                                                                                                                                                                                                                                                  \item Correct use of integer portion of mode union for setting in sys chmod
                                                                                                                                                                                                                                                                                                                                                                                                                                                    \end{enumerate} 

                                                                                                                                                                                                                                                                                                                                                                                                                                                      \subsection*{{\tt chmod} / {\tt chown} / {\tt chgrp} User Commands}
                                                                                                                                                                                                                                                                                                                                                                                                                                                        \begin{enumerate}[(a)]
                                                                                                                                                                                                                                                                                                                                                                                                                                                              \item New commands {\tt chmod, chown and chgrp}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item Parsing of user input string and conversion to int for {\tt uid, gid and mode}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \end{enumerate} 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          \subsection*{{\tt ls} command}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \begin{enumerate}[(a)]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \item Inclusion and usage of print mode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \item Modification to print statements and new header print
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \subsection*{{\tt exec} System Call}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \begin{enumerate}[(a)]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \item Copying to stat struct to read execute permissions for fileâ€™s inode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Checking if process has execute permissions based on appropriate user, group, or other execute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            flag
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  \item Checking {\tt setuid} flag and changing the process uid if necessary
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \newpage
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    %%%%%%%%%%%%%%TESTING%%%%%%%%%%%%%%%%%%%%%%%%%%

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \section*{Testing}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \begin{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Using the supplied {\tt p5-test} command, explain what is tested and show the results of:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \begin{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Proc UID
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item Proc GID
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item chmod()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item chown()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item chgrp()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item exec()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item setuid
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \end{enumerate}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \begin{figure}[h!]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \centering
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \includegraphics[width=0.8\linewidth]{./1.png}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \caption[]{}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \label{fig:}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \end{figure}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    The system call trace correctly displays invoked system calls. The standard output is interleaved with the trace output. The output ``init: starting sh'' is printed by the {\tt init()} process ({\tt init.c}) and the ``\$'' is printed by the shell process ({\tt sh.c}).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        This test {\tt PASSES}.

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \newpage  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \item {\tt chmod} Command
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \begin{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Show that it changes mode when given valid parameters
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item Show that it fails and does not change mode when given an invalid filename
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Show that it fails and does not change mode when given an invalid mode          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \begin{figure}[h!]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \centering
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \includegraphics[width=0.8\linewidth]{./2.png}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \caption[]{}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \label{fig:}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \end{figure}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \newpage
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \item {\tt chown} Command
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \begin{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item  Show that it changes UID when given valid parameters
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item Show that it fails and does not change UID when given an invalid filename
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item Show that it fails and does not change UID when given an invalid UID        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \begin{figure}[h!]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \centering
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \includegraphics[width=0.8\linewidth]{./3.png}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \caption[]{}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \label{fig:}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \end{figure}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \newpage

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \item {\tt chgrp} Command
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \begin{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \item Show that it changes GID when given valid parameters
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \item Show that it fails and does not change GID when given an invalid filename
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        \item Show that it fails and does not change GID when given an invalid GID        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \end{enumerate}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \begin{figure}[h!]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \centering
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \includegraphics[width=0.8\linewidth]{./4.png}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \caption[]{}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \label{fig:}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \end{figure}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \newpage

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \item Show that ls command prints out the correct information, including the correct permissions for the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                mode bits

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \begin{figure}[h!]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \centering
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \includegraphics[width=0.8\linewidth]{./5.png}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \caption[]{}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \label{fig:}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \end{figure}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                \newpage

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \item Show that changes to UID, GID and mode persist on exiting and rebooting xv6. (Don't do a make clean on reboot or you will rebuild the file system and put everything back to defaults)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \begin{figure}[h!]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \centering
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \includegraphics[width=0.8\linewidth]{./6.png}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \caption[]{}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \label{fig:}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \end{figure}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \newpage
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \end{enumerate} 

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \end{document}
